<!doctype html>
<!--[if lt IE 7 ]> <html lang="en-us" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en-us" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en-us" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]> <html lang="en-us" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en-us"> <!--<![endif]-->

  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" >
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
      <title>Building and GIFing a simple timer circuit | Wickerbox</title>
    

    <!-- Fluid 960 Grid System -->
    <link rel="stylesheet" type="text/css" href="/css/reset.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/text.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/grid.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/layout.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/nav.css" media="screen" />
    <!--[if IE 6]><link rel="stylesheet" type="text/css" href="/css/ie6.css" media="screen" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" type="text/css" href="/css/ie.css" media="screen" /><![endif]-->

    
  </head>

	<body style="background: #173c69; font-size: 1em; border-left, border-right: 5% solid #324e4e; background: url(/images/tumble_lake.png); background-size: cover; background-attachment: fixed;">

    <div class="container_16">
      <div class="grid_16" id="site_info" style="background: none;">
        <div class="box" style="border: 1px solid #000; margin: 20px auto 0px;">
          <p style="float: left;"><a href="/">Wickerbox</a> | Jenner Hanni </p>
          <p style="float: right;">
            <a href="/about/">About</a> - <a href="/travels/">Travels</a> - 
            <a href="/projects/">Projects</a> - <a href="/writing/">Writing</a> - <a href="/two-cats/">Two Cats</a>
          </p>
          <p style="text-align:center;">&nbsp;</p>
        </div>
      </div>

      <div style="clear:both;"></div>

      <div class="grid_2">
        &nbsp; &nbsp;
      </div>
      <div class="grid_7" style="background-color: #fff; margin: 0px; border-left: 1px solid #000; border-right: 1px solid #000;">

          <div class="mainbox">
<p><strong>Building and GIFing a simple timer circuit</strong><br />
2012 - Portland State University</p>

<p>Just screwing around with circuits.</p>
<p>I recently bought a house and set up a little home office. In the process, I found a bunch of through-hole components that I got from parts unknown and ended up sorting and messing around with them. All of this high-level ChibiOS stuff has been stressing me out so I did something I haven&#8217;t done in maybe forever &#8212; made a bunch of little circuits for the hell of it.</p>
<p>By the way, Parts Unknown would be an awesome name for an electronics component business.</p>
<img src="/images/project/blinky/IMG_0187.png">
<p>The first question I asked was hey, does this potentiometer work? Do these LEDs? It&#8217;s a three-pin pot powered off a 9V with output voltage over the <span class="caps">LED</span>.</p>
<img src="/images/project/blinky/IMG_0194a.png">
<p>I wanted some sort of switch to turn off all power without having to keep unsnapping the 9V header but all I could come up with in my box of parts was a 8-pin switch.</p>
<p>I went through all my through-hole ICs and found that I&#8217;ve accumulated all the usual: logic gates, comparators, muxes, op amps&#8230; and 555 timers, which I know of but have never actually used.</p>
<p>I used a schematic from Forrest Mims&#8217; 555 Timer cookbook and wired it up. Then I looked into how to make a gif to post here so it&#8217;s clear the light is blinking. I figured ffmpeg would work but it&#8217;s got a note that this feature is deprecated and to use avconv instead. I tried with ffmpeg anyway and got a 141 MB file.</p>
<p>I went looking for better instructions and found <a href="https://scottlinux.com/2011/07/31/create-animated-gif-in-linux-from-command-line/">Scott&#8217;s Linux blog</a>.</p>
<p>I took the picture with an iPhone 4S and used avconv to grab a photo every second. That gave me four still iamges to put into the gif.</p>
<p><code>avconv -i IMG_0196.MOV -vsync 1 -r 1 -an -y 'frame%d.jpg'</code></p>
<p>Then I used Scott&#8217;s instructions to make what turned out to be a pretty crappy gif, through no fault of his.</p>
<p><code>mogrify -resize 640x480 *.jpg</code></p>
<p><code>convert -delay 20 -loop 0 *.jpg 555blink.gif</code></p>
<img src="/images/project/blinky/555blink1.gif">
<p>Lesson learned: I need a camera tripod and also to automate this process. I looked around and found another movie that was much longer, so I repeated the process and took the first eight frames.</p>
<img src="/images/project/blinky/555blink2.gif">
<p><code> mogrify -resize 640x480 *.jpg</p>
<p>convert -delay 30 -loop 0 *.jpg 555blink1.gif</p>
<p>avconv -i IMG_0196.<span class="caps">MOV</span> -vsync 1 -r 2 -an -y &#8216;frame%d.jpg&#8217;</code></p>
<p>I should probably have taken twice as many frames per second in the avconv process because it doesn&#8217;t show that the light should be on the same amount of time each blink. So I did that on the longer movie and ended up selecting the first 10 frames in the sequence, which includes two cycles of the blinking <span class="caps">LED</span>.</p>
<img src="/images/project/blinky/555blink3.gif">
<p>I kept going for the hell of it, since I had 8 switches to work with. I added a little push-button switch to turn on the <span class="caps">LED</span> on the button press. Having both hooked up at the same time meant the <span class="caps">LED</span> up top was blinking as per the 555 timer but pressing the button down below sunk all current through the bottom <span class="caps">LED</span>.</p>
<img src="/images/project/blinky/IMG_0199.png">
<p>It seems like it&#8217;d be pretty easy to fake a <span class="caps">GIF</span>, to do sleight of hand, and to demonstrate performance or meeting a spec that isn&#8217;t actually there. This last gif is the longest, the largest, with 2fps to pull the still images, but it&#8217;s still not anywhere near acceptable.</p>
<p>Kind of a cool thing to think about.</p>
<img src="/images/project/blinky/buttonblink.gif">
</div>

      </div>
      <div class="grid_1">
        &nbsp; 
      </div>
      <div class="grid_4" >
      </div>

			<div class="grid_2">
        &nbsp;
			</div>

      <div class="clear">&nbsp;</div>
      <div class="clear">&nbsp;</div>

			<div class="grid_16" id="site_info">
        <div class="box" style="border: 1px solid #000; margin: 0 auto 20px;">
					<p><a href="/">Wickerbox</a> by <a href="mailto:jeh.wicker@gmail.com">Jenner Hanni</a> uses the <a href="http://www.designinfluences.com/fluid960gs/">Fluid 960 Grid System</a> and <a href="http://jekyllrb.com/">Jekyll</a>. All photography and write-ups are licensed under the <a href="http://opensource.org/licenses/BSD-3-Clause">3-clause BSD license</a>. 
				</div>
			</div>
			<div class="clear"></div>
		</div>
	</body>
</html>
